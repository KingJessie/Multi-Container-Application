<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Visitor Count</title>
  <link rel="stylesheet" href="/static/style.css" />
  <link href="https://fonts.googleapis.com/css2?family=McLaren&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="container">
    <h1>Visitor Counter</h1>

    <!-- Total count -->
    <div class="total">Total visits: {{ count }}</div>

    <!-- Chart -->
    <canvas id="visitsChart" width="400" height="200"></canvas>

    <a href="/" class="home-link">Back to Home</a>
    <img src="{{ url_for('static', filename='images/panda2.png') }}" alt="Panda" class="panda">
  </div>

<script>
  const labels = JSON.parse('{{ labels | safe }}');
  const values = JSON.parse('{{ chart_data | safe }}');

  const ctx = document.getElementById('visitsChart');
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [{
        label: 'Daily Visitors',
        data: values,
        backgroundColor: '#b388eb'
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: {
          labels: {
            color: '#000' 
          }
        }
      },
      scales: {
        x: {
          ticks: {
            color: '#000' 
          }
        },
        y: {
          beginAtZero: true,
          ticks: {
            color: '#000' 
          }
        }
      }
    }
  });
</script>
</body>
</html>